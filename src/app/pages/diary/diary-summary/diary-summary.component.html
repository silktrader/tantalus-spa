<div class="full-height">
  <app-toolbar>
    <h4 desktop-title class="date-selection" (click)="picker.open()">{{date | date:'longDate'}}
      <input class="hidden-date-input" [matDatepicker]="picker" [formControl]="dateInput">
      <mat-datepicker-toggle [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </h4>

    <h4 mobile-title (click)="picker.open()">{{date | date:'longDate'}}
      <input class="hidden-date-input" [matDatepicker]="mobilePicker" [formControl]="dateInput">
      <mat-datepicker #mobilePicker></mat-datepicker>
    </h4>

    <section desktop-actions>
      <button *ngIf="diary" mat-raised-button color="warn" (click)="deleteAll()">
        Erase
      </button>
      <button mat-raised-button color="accent" (click)="addPortion()">
        Add Portions
      </button>
    </section>

    <section mobile-actions>
      <button mat-icon-button (click)="addPortion()">
        <mat-icon>add</mat-icon>
      </button>
      <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Actions Menu">
        <mat-icon>more_vert</mat-icon>
      </button>

      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="deleteAll()">
          <mat-icon>delete</mat-icon>
          <span>Delete All</span>
        </button>
      </mat-menu>
    </section>

  </app-toolbar>

  <section class="container">

    <section class="loading-notice" *ngIf="loading || (!settings); else contents">
      <h4>loading results</h4>
      <mat-spinner></mat-spinner>
    </section>

    <ng-template #contents>

      <ng-container *ngIf="diary?.hasContents; else noMeals">

        <app-long-portions-list *ngIf='view === viewType.large' (deletePortionsEvent)="deletePortions($event)">
        </app-long-portions-list>

        <app-short-portions-list *ngIf='view === viewType.small' (deletePortionsEvent)="deletePortions($event)">
        </app-short-portions-list>

      </ng-container>

      <ng-template #noMeals>
        <mat-card class="no-meals"><span>No recorded meals</span></mat-card>
      </ng-template>
    </ng-template>
  </section>
</div>